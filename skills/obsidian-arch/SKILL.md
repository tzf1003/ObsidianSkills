---
name: obsidian-arch
description: >-
  Architect AI for Obsidian. Generates, maintains, and interprets project architecture diagrams (Canvas) and interaction sequence diagrams.
  Use when you want to visualize code architecture, generate sequence diagrams, or sync architecture changes back to code.
  Triggers: /init, /arch, /seq, /sync, /ask.
---

# Obsidian AI æ¶æ„å¸ˆ Skills (ObsidianArchSkills)

è¿™æ˜¯ä¸€ä¸ªåŸºäº MCP (Model Context Protocol) çš„ AI æŠ€èƒ½é›†ï¼Œæ—¨åœ¨å°† **å¼€å‘ç¯å¢ƒ** ä¸ **Obsidian çŸ¥è¯†åº“** æ·±åº¦èåˆã€‚å®ƒèµ‹äºˆäº† AI â€œæ¶æ„å¸ˆâ€å’Œâ€œäº¤äº’åˆ†æå¸ˆâ€çš„äººæ ¼ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆã€ç»´æŠ¤å¹¶è§£è¯»é¡¹ç›®çš„æ¶æ„é€»è¾‘å›¾ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

**å…¥å£æŒ‡ä»¤**: `@obsidian-arch` 
### æ ¸å¿ƒèƒ½åŠ› (Skills)

| æŠ€èƒ½åç§° | æŒ‡ä»¤ | æè¿° |
| :--- | :--- | :--- |
| **åˆå§‹åŒ–é¡¹ç›®** | `/init` | åœ¨ Obsidian ä¸­åˆ›å»ºä¸å½“å‰é¡¹ç›®åŒåçš„æ–‡ä»¶å¤¹ï¼Œå¹¶å»ºç«‹åŸºç¡€æ¶æ„ç”»å¸ƒã€‚ |
| **ç”Ÿæˆ/æ›´æ–°æ¶æ„å›¾** | `/arch` | æ·±åº¦åˆ†æå½“å‰ä»£ç åº“ï¼Œç”Ÿæˆæˆ–æ›´æ–°å…¨å±€æ¶æ„å›¾ (`architecture.canvas`)ã€‚ |
| **ç”Ÿæˆäº¤äº’åºåˆ—å›¾** | `/seq` | é’ˆå¯¹ç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼Œç”ŸæˆåŠ¨æ€äº¤äº’åºåˆ—å›¾ (`sequence.canvas`)ã€‚ |
| **åå‘åŒæ­¥ä»£ç ** | `/sync` | è¯»å– Obsidian ä¸­çš„æ¶æ„å›¾å˜æ›´ï¼Œå°†å…¶åº”ç”¨åˆ°ä»£ç åº“ä¸­ï¼ˆå¦‚é‡å‘½åæ¨¡å—ã€æ·»åŠ ä¾èµ–ï¼‰ã€‚ |
| **æ¶æ„è§£è¯»** | `/ask` | é’ˆå¯¹å½“å‰çš„æ¶æ„å›¾æˆ–ä»£ç é€»è¾‘è¿›è¡Œæ·±åº¦é—®ç­”å’Œè§£è¯»ã€‚ |

---

## ğŸ› ï¸ æŠ€èƒ½è¯¦æƒ…ä¸æ‰§è¡Œé€»è¾‘

### 1. åˆå§‹åŒ–é¡¹ç›® (`/init`)
**ç›®æ ‡**: å»ºç«‹ Obsidian æ˜ å°„ç¯å¢ƒï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå…¨å¥—æ¶æ„æ–‡æ¡£ã€‚

**âš ï¸ å…³é”®æ‰§è¡Œåè®® (Anti-Laziness Protocol)**:
æ­¤ä»»åŠ¡æ¶‰åŠå¤§é‡æ–‡ä»¶ç”Ÿæˆï¼Œ**ä¸¥ç¦**ä»…ç”Ÿæˆç¤ºä¾‹æˆ–è·³è¿‡æ­¥éª¤ã€‚ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰æ ¸å¿ƒæ¨¡å—éƒ½è¢«è¦†ç›–ã€‚å¦‚æœå•æ¬¡å›å¤æ— æ³•å®Œæˆï¼Œè¯·**è‡ªåŠ¨ç»§ç»­**æˆ–æç¤ºç”¨æˆ·â€œæ­£åœ¨ç»§ç»­ç”Ÿæˆ...â€ã€‚

**æ‰§è¡Œæµç¨‹**:
1.  **ç¯å¢ƒå‡†å¤‡**:
    *   è·å–å½“å‰ VS Code å·¥ä½œåŒºçš„æ ¹ç›®å½•åç§°ï¼ˆä½œä¸ºé¡¹ç›®åï¼‰ã€‚
    *   ä½¿ç”¨ `list_vault_files` æ£€æŸ¥ Obsidian ä¸­æ˜¯å¦å­˜åœ¨åŒåæ–‡ä»¶å¤¹ã€‚
    *   å¦‚æœä¸å­˜åœ¨ï¼Œä½¿ç”¨ `create_vault_file` åˆ›å»ºä¸€ä¸ªå ä½æ–‡ä»¶ï¼ˆå¦‚ `é¡¹ç›®å/README.md`ï¼‰æ¥éšå¼åˆ›å»ºæ–‡ä»¶å¤¹ã€‚
2.  **å¹¿åº¦ä¼˜å…ˆæ¶æ„ç”Ÿæˆ (Level 1)**:
    *   **è¯»å–è§„èŒƒ**: è¯»å– `references/canvas_spec.md` ä»¥ç¡®ä¿ç”Ÿæˆçš„ JSON ç¬¦åˆå®˜æ–¹æ ‡å‡†ã€‚
    *   è°ƒç”¨ `architect_core` (å‚æ•°: `granularity=high_level`)ï¼Œç”Ÿæˆå…¨å±€æ¶æ„æ¦‚è§ˆã€‚
    *   ä¿å­˜ä¸º `é¡¹ç›®å/å…¨å±€æ¶æ„å›¾.canvas`ã€‚
    *   **å…³é”®æ­¥éª¤**: æ˜ç¡®åˆ—å‡ºè¯†åˆ«åˆ°çš„æ‰€æœ‰æ ¸å¿ƒæ¨¡å—åˆ—è¡¨ (ä¾‹å¦‚: `Auth`, `Order`, `Payment`)ï¼Œè¿™å°†ä½œä¸ºåç»­æ­¥éª¤çš„è¾“å…¥ã€‚
3.  **æ·±åº¦ä¼˜å…ˆæ¨¡å—åˆ†æ (Level 2) - å¾ªç¯æ‰§è¡Œ**:
    *   **å¿…é¡»**éå†æ­¥éª¤ 2 ä¸­è¯†åˆ«å‡ºçš„**æ¯ä¸€ä¸ª**æ ¸å¿ƒæ¨¡å—ã€‚
    *   å¯¹æ¯ä¸ªæ¨¡å—ï¼Œè°ƒç”¨ `architect_core` (å‚æ•°: `granularity=detailed`, `scope=æ¨¡å—è·¯å¾„`)ã€‚
    *   ä¿å­˜ä¸º `é¡¹ç›®å/æ¨¡å—è¯¦æƒ…/{æ¨¡å—å}_æ¶æ„.canvas`ã€‚
    *   *æ£€æŸ¥ç‚¹*: ç¡®è®¤æ–‡ä»¶å·²å†™å…¥åå†å¤„ç†ä¸‹ä¸€ä¸ªæ¨¡å—ã€‚
4.  **å…³é”®äº¤äº’åºåˆ—ç”Ÿæˆ (Level 3) - å¾ªç¯æ‰§è¡Œ**:
    *   å¯¹æ¯ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œè¯†åˆ«å…¶ 1-2 ä¸ªå…³é”®å…¥å£ï¼ˆå¦‚ API æ¥å£ï¼‰ã€‚
    *   è°ƒç”¨ `interaction_core` (å‚æ•°: `scenario=æ¨¡å—æ ¸å¿ƒæµç¨‹`)ã€‚
    *   ä¿å­˜ä¸º `é¡¹ç›®å/äº¤äº’åºåˆ—/{æ¨¡å—å}_æ ¸å¿ƒæµç¨‹.canvas`ã€‚
5.  **æœ€ç»ˆéªŒè¯**: 
    *   æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æ¨¡å—éƒ½æœ‰å¯¹åº”çš„æ¶æ„å›¾å’Œåºåˆ—å›¾ã€‚
    *   è¾“å‡ºæœ€ç»ˆç”Ÿæˆçš„ Canvas æ–‡ä»¶æ¸…å•åˆ°`é¡¹ç›®å/README.md`ã€‚

**æ³¨æ„**: æ‰€æœ‰ç”Ÿæˆçš„å†…å®¹ï¼ˆèŠ‚ç‚¹æ–‡æœ¬ã€æ‘˜è¦ã€æè¿°ï¼‰é»˜è®¤ä½¿ç”¨**ä¸­æ–‡**ã€‚

### 2. ç”Ÿæˆ/æ›´æ–°æ¶æ„å›¾ (`/arch`)
**è§’è‰²**: AI æ¶æ„æ€»å¸ˆ (Chief AI Architect)
**æºæç¤ºè¯**: `references/architect_core.md`
**æ‰§è¡Œæµç¨‹**:
1.  **å…¨é‡æ‰«æ**: è¯»å–é¡¹ç›®æ–‡ä»¶ç»“æ„ (`list_dir`) å’Œå…³é”®å…ƒæ•°æ®æ–‡ä»¶ (`package.json`, `pom.xml` ç­‰)ã€‚
2.  **æ·±åº¦åˆ†æ**: æ ¹æ®[æ¶æ„è¯»å– `references/canvas_spec.md` ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼Œæ€»å¸ˆ]çš„é€»è¾‘ï¼Œæ„å»ºé¡¹ç›®çš„ä¾èµ–ç½‘ç»œå’ŒæŠ½è±¡æ¨¡å‹ã€‚
3.  **Canvas ç”Ÿæˆ**: æ„é€ ç¬¦åˆ Obsidian Canvas è§„èŒƒçš„ JSON æ•°æ®ã€‚
4.  **å†™å…¥ Vault**: ä½¿ç”¨ `create_vault_file` (æˆ– `update_active_file` å¦‚æœå·²æ‰“å¼€) å°†å†…å®¹å†™å…¥ `é¡¹ç›®å/architecture.canvas`ã€‚
5.  **è‡ªåŠ¨æ‰“å¼€**: ä½¿ç”¨ `show_file_in_obsidian` æ‰“å¼€ç”Ÿæˆçš„ç”»å¸ƒã€‚

### 3. ç”Ÿæˆäº¤äº’åºåˆ—å›¾ (`/seq`)
**è§’è‰²**: AI äº¤äº’åˆ†ææ€»å¸ˆ (Chief AI Interaction Analyst)
**æºæç¤ºè¯**: `references/interaction_core.md`
**å‚æ•°**: ç”¨æˆ·éœ€æŒ‡å®šä¸€ä¸ªâ€œä¸šåŠ¡åœºæ™¯â€æˆ–â€œå…¥å£å‡½æ•°â€ï¼ˆå¦‚ï¼šâ€œç”¨æˆ·ä¸‹å•æµç¨‹â€ï¼‰ã€‚
**æ‰§è¡Œæµç¨‹**:
1.  **åœºæ™¯å®šä½**: æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œæœç´¢ç›¸å…³ä»£ç å…¥å£ (`semantic_search` æˆ– `grep_search`)ã€‚
2.  **é“¾è·¯è¿½è¸ª**: åˆ†æå‡½æ•°è°ƒç”¨è¯»å– `references/canvas_spec.md` ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼Œé“¾ã€å¼‚æ­¥æ¶ˆæ¯å’Œæ•°æ®æµã€‚
3.  **Canvas åºåˆ—åŒ–**: å°†æ—¶åºé€»è¾‘è½¬åŒ–ä¸º Canvas èŠ‚ç‚¹ï¼ˆç”Ÿå‘½çº¿ï¼‰å’Œè¿çº¿ï¼ˆæ¶ˆæ¯ï¼‰çš„å¸ƒå±€ã€‚
4.  **å†™å…¥ Vault**: ä¿å­˜ä¸º `é¡¹ç›®å/sequences/{åœºæ™¯å}.canvas`ã€‚
5.  **è‡ªåŠ¨æ‰“å¼€**: ä½¿ç”¨ `show_file_in_obsidian` æ‰“å¼€ã€‚

### 4. åå‘åŒæ­¥ä»£ç  (`/sync`)
**ç›®æ ‡**: å®ç°æ¶æ„å›¾é©±åŠ¨çš„å¼€å‘ (Architecture-Driven Development)ã€‚
**æ‰§è¡Œæµç¨‹**:
1.  **è¯»å–ç”»å¸ƒ**: ä½¿ç”¨ `get_vault_file` è¯»å– `architecture.canvas`ã€‚
2.  **å·®å¼‚åˆ†æ**: æ¯”è¾ƒç”»å¸ƒä¸­çš„èŠ‚ç‚¹/å…³ç³»ä¸å½“å‰ä»£ç åº“çš„å®é™…ç»“æ„ã€‚
    *   *æ£€æµ‹*: èŠ‚ç‚¹é‡å‘½å -> ä»£ç é‡æ„/é‡å‘½åæ–‡ä»¶ã€‚
    *   *æ£€æµ‹*: æ–°å¢è¿çº¿ -> ä»£ç ä¸­æ·»åŠ å¼•ç”¨/ä¾èµ–ã€‚
    *   *æ£€æµ‹*: æ–°å¢èŠ‚ç‚¹ -> åˆ›å»ºæ–°çš„æ¨¡å—/æ–‡ä»¶éª¨æ¶ã€‚
3.  **ä»£ç å˜æ›´**: ä½¿ç”¨æ–‡ä»¶ç¼–è¾‘å·¥å…· (`create_file`, `replace_string_in_file`) åº”ç”¨å˜æ›´ã€‚
4.  **æŠ¥å‘Š**: è¾“å‡ºå˜æ›´æ—¥å¿—ã€‚

### 5. æ¶æ„è§£è¯» (`/ask`)
**ç›®æ ‡**: ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æ¶æ„é—®ç­”ã€‚
**æ‰§è¡Œæµç¨‹**:
1.  ç”¨æˆ·é€‰ä¸­ä»£ç æˆ–æŒ‡å‘ Canvas ä¸­çš„æŸä¸ªèŠ‚ç‚¹ã€‚
2.  AI ç»“åˆ `architecture.canvas` çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆè¯¥æ¨¡å—çš„èŒè´£ã€ä¾èµ–å…³ç³»ï¼‰å’Œå®é™…ä»£ç å†…å®¹è¿›è¡Œè§£é‡Šã€‚

---

## âš™ï¸ é…ç½®è¦æ±‚

ç¡®ä¿ä½ çš„ MCP Server é…ç½®åŒ…å«ä»¥ä¸‹å·¥å…·æƒé™ï¼š
- `obsidian-mcp-server` (æä¾› `create_vault_file`, `search_vault` ç­‰èƒ½åŠ›)
- `filesystem` (æä¾›è¯»å–æœ¬åœ°ä»£ç çš„èƒ½åŠ›)

## ğŸ“‚ æ–‡ä»¶ç»“æ„
```text
skills/obsidian-arch/
â”œâ”€â”€ SKILL.md                # å…¥å£æ–‡ä»¶
â””â”€â”€ references/
    â”œâ”€â”€ architect_core.md   # æ¶æ„æ€»å¸ˆæç¤ºè¯
    â”œâ”€â”€ interaction_core.md # äº¤äº’åˆ†ææ€»å¸ˆæç¤ºè¯
    â””â”€â”€ canvas_spec.md      # Obsidian Canvas JSON è§„èŒƒå‚è€ƒ
```
